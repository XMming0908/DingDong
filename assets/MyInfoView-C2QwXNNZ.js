import{_ as A,a as q,r as l,u as F,o as L,b as n,c as M,d as z,f as s,e as d,w as v,F as E,g as N,ac as O,A as T,z as $,B as R,p as j,h as D}from"./index-DxwKcjF_.js";import{a as G}from"./index.esm-B3KFWiaj.js";const H=c=>(j("data-v-2b4f0df6"),c=c(),D(),c),J={class:"login_bg"},K={class:"login_bg2"},P={style:{"padding-top":"40px"}},Q=H(()=>d("button",{class:"btn",type:"submit",style:{"margin-top":"30px"}}," 修 改 ",-1)),W={__name:"MyInfoView",setup(c){const p=q(),b=l({}),g=F(),u=l(!1),_=l(""),i=l(""),m=l(""),o=l(""),y=/^1[3-9]\d{9}$/,V=async()=>{const a=await N(p.userId);i.value=a.username,m.value=a.mobilenum,o.value=a.address,b.value=a},w=a=>{a.user_id=p.userId,I(a)},h=a=>{u.value=!1,o.value="",console.log(a.selectedOptions),a.selectedOptions.forEach((e,f,r)=>{o.value+=e.text+"-"}),o.value=o.value.substr(0,o.value.length-1)},x=()=>{u.value=!1},I=async a=>{const e=await O(a);console.log(e),e.success==1?(T("修改成功"),p.clearId(),g.push("/login")):$("修改失败")};L(()=>{V()});const C=()=>history.back();return(a,e)=>{const f=n("van-nav-bar"),r=n("van-field"),B=n("van-cell-group"),S=n("van-form"),U=n("van-area"),k=n("van-popup");return M(),z(E,null,[s(f,{title:"修改信息","left-text":"返回","left-arrow":"",onClickLeft:C,style:{position:"fixed",width:"100%","z-index":"2"}}),d("div",null,[d("div",J,[d("div",K,[d("div",P,[s(S,{onSubmit:w},{default:v(()=>[s(B,{inset:""},{default:v(()=>[s(r,{type:"text",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),name:"username",placeholder:"请输入用户名",label:"用户名",rules:[{required:!0,message:"用户名不能为空"}]},null,8,["modelValue"]),s(r,{type:"password",modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=t=>_.value=t),name:"userpass",placeholder:"请输入密码",label:"密码",rules:[{required:!0,message:"密码不能为空"}]},null,8,["modelValue"]),s(r,{type:"number",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t),name:"mobilenum",placeholder:"请输入手机号",label:"手机号",rules:[{pattern:y,message:"请输入正确手机号"}],maxlength:"11"},null,8,["modelValue","rules"]),s(r,{type:"text",modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value=t),name:"address",placeholder:"请输入地址",label:"地址",readonly:"",onClick:e[4]||(e[4]=t=>u.value=!u.value),rules:[{required:!0,message:"地址不能为空"}]},null,8,["modelValue"]),Q]),_:1})]),_:1})])])])]),s(k,{show:u.value,"bind:close":"onClose",position:"bottom"},{default:v(()=>[s(U,{title:"标题","area-list":R(G),onConfirm:h,onCancel:x},null,8,["area-list"])]),_:1},8,["show"])],64)}}},Z=A(W,[["__scopeId","data-v-2b4f0df6"]]);export{Z as default};
