import{_ as x,n as k,a as S,u as V,r as B,O as q,o as D,q as T,b as f,c as n,d as i,e as d,f as c,F as _,j as A,k as C,z as u,P as F,Q as N,A as O,m as z,p as E,h as P}from"./index-DxwKcjF_.js";import{a as R,d as j,r as L}from"./RemarkView-B9bURPVs.js";const p=o=>(E("data-v-851b71dd"),o=o(),P(),o),M={class:"box"},Q=p(()=>d("div",{style:{"text-align":"center",color:"white","font-size":"18px"}},"确认订单",-1)),G=p(()=>d("div",{style:{height:".1px","background-color":"#ffffff9e",margin:"10px 0"}},null,-1)),H={key:0},J={__name:"Buy2View",setup(o){const r=k(),h=S(),v=V(),a=B(null),s=q({num:1,food:[]}),b=()=>{if(a.value.addressInfo=="请选择收货地址"){u("请选择收货地址");return}else if(a.value.timeStr=="选择送达时间"){u("请选择送达时间");return}let e=a.value.currentTime;y({userId:h.userId,items:r.query.itemId,sum:r.query.sum,suggesttime:e[0]+":"+e[1]}),v.push("/")},I=async e=>{const t=await F(e);s.food.push(...t)},y=async e=>{(await N(e)).success==="0"?u("购买失败！"):O("购买成功！")};D(()=>{r.query.itemId!=""&&I(r.query.itemId)});const g=T(()=>{let e=0;return s.food.length>=1?(s.food.forEach((t,l)=>{e+=t.price*t.num*100}),e):e=0});return(e,t)=>{const l=f("van-notice-bar"),w=f("van-submit-bar");return n(),i(_,null,[d("div",M,[Q,G,c(l,{"left-icon":"volume-o",text:"温馨提示：请适量点餐、避免浪费"}),c(R,{ref_key:"childDom",ref:a},null,512),s.food.length>0?(n(),i("div",H,[(n(!0),i(_,null,A(s.food,m=>(n(),z(j,{key:m.shop_id,foodData:m},null,8,["foodData"]))),128))])):C("",!0),c(L)]),c(w,{price:g.value,"button-text":"提交订单",onSubmit:b},null,8,["price"])],64)}}},W=x(J,[["__scopeId","data-v-851b71dd"]]);export{W as default};
