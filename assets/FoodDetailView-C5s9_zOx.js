import{_ as M,r as n,n as R,a as J,o as K,E as U,I as Z,b as r,c as f,d as x,e,t as A,x as d,f as o,w as _,F as y,J as $,j as q,m as G,p as H,h as O,K as P,z as B,A as b,M as Q}from"./index-DxwKcjF_.js";import{A as W}from"./AppraiseView-CowN1QiW.js";const i=u=>(H("data-v-21562e9d"),u=u(),O(),u),Y={style:{height:"100%","background-color":"rgb(238, 238, 238)","margin-bottom":"50px"}},ee=["src"],te={class:"box"},oe={style:{"font-size":"21px","font-weight":"bold"}},se=i(()=>e("div",{style:{"font-size":"13px",color:"#999"}},"月售1000+ 好评100%",-1)),ie=i(()=>e("div",{style:{display:"flex"}},[e("div",{class:"bq"},"5.2折起")],-1)),ae={style:{display:"flex","align-items":"flex-end"}},le={style:{display:"flex","font-size":"18px","font-weight":"bold",color:"rgb(255, 75, 51)","align-items":"flex-end"}},ne={style:{"font-size":"25px"}},ce=i(()=>e("div",{style:{"text-decoration":"line-through",color:"#999","margin-left":"10px","font-size":"13px"}},"￥37",-1)),de=i(()=>e("div",{style:{color:"#999","margin-left":"5px","font-size":"13px"}},"打包费3.7/份",-1)),re=i(()=>e("div",{class:"box"},[e("div",{style:{"font-size":"15px","font-weight":"bold"}},"商品详情"),e("div",{class:"info_item"},[d("原料 "),e("div",{style:{"margin-left":"40px"}},"蔬菜,肉片")]),e("div",{class:"info_item"},[d("分量 "),e("div",{style:{"margin-left":"40px"}},"1人份")]),e("div",{class:"info_item"},[d("口味 "),e("div",{style:{"margin-left":"40px"}},"咸")]),e("div",{class:"info_item"},[d("价格说明 "),e("img",{src:"https://img.alicdn.com/tfs/TB11vrbfIieb18jSZFvXXaI3FXa-36-36.png"})])],-1)),_e={class:"box"},ue=i(()=>e("div",{style:{"font-size":"15px","font-weight":"bold"}},"商品评价",-1)),ve={class:"box"},fe=i(()=>e("div",{style:{"font-size":"15px","font-weight":"bold"}},"更多推荐",-1)),pe=i(()=>e("div",{style:{display:"flex","font-size":"14px","align-items":"center",margin:"10px 0"}},[e("div",{style:{"font-weight":"bold"}},"2人食"),e("div",{style:{"font-size":"12px",color:"#999","margin-left":"10px"}},"8人这样搭配")],-1)),me=i(()=>e("div",{style:{display:"flex",width:"100%"}},[e("div",{class:"tj_box"},[e("img",{class:"tj_img",src:"https://cube.elemecdn.com/7/6f/55271a85a3215062f79694b8eb129png.png?x-oss-process=image/resize,m_fill,w_323,h_323/format,webp/quality,q_75"}),e("div",null,"热卖双椒皮蛋饭"),e("div",null,"￥25.88")]),e("div",{class:"tj_box",style:{"margin-left":"auto"}},[e("img",{class:"tj_img",style:{"margin-left":"auto"},src:"https://cube.elemecdn.com/e/4c/213d5885f1712b4ac2a353745fc16png.png?x-oss-process=image/resize,m_fill,w_323,h_323/format,webp/quality,q_75"}),e("div",null,"五常香米饭"),e("div",null,"￥2.88")])],-1)),ge=[pe,me],he={class:"footer"},xe={__name:"FoodDetailView",setup(u){const a=n(!1),l=n({}),w=R(),v=n(-1),p=J(),C=n(""),m=n([]),z=n({name1:"star-o",name2:"star"}),F=n({color1:"black",color2:"yellow"}),S=async()=>{const t=await $(v.value);l.value=t};K(()=>{v.value=w.query.food_id,C.value=w.query.shop_name,S(),V({user_id:p.userId,shop_food_id:v.value,flag:1}),T()});const j=async t=>{console.log(t);const s=await P(t);s.success==="0"&&B("添加失败"),s.success==="1"&&b("添加成功")},I=()=>{j({user_id:p.userId,food_id:l.value.food_id})},D=()=>{a.value=!a.value,N({user_id:p.userId,food_id:l.value.food_id})},V=async t=>{(await U(t)).collected==1?a.value=!0:a.value=!1},T=async()=>{const s=(await Z(v.value)).reverse();m.value.push(...s),console.log(m.value)},N=async t=>{(await Q(t)).success==1?a.value?b("收藏成功"):b("取消收藏成功"):B("失败")},X=t=>`http://172.17.18.240:8080/nfood${t}`;return(t,s)=>{const g=r("van-tab"),E=r("van-tabs"),h=r("van-action-bar-icon"),k=r("van-action-bar-button"),L=r("van-action-bar");return f(),x(y,null,[e("div",Y,[e("img",{src:X(l.value.pic),style:{width:"100%",height:"350px"}},null,8,ee),e("div",te,[e("div",oe,A(l.value.foodname),1),se,ie,e("div",ae,[e("div",le,[d(" ￥ "),e("div",ne,A(l.value.price),1),d(" 起 ")]),ce,de,e("div",{class:"left_div",onClick:I}," +加入购物车 ")])]),o(E,{active:t.active,"onUpdate:active":s[0]||(s[0]=c=>t.active=c)},{default:_(()=>[o(g,{title:"详情"},{default:_(()=>[re]),_:1}),o(g,{title:"评价"},{default:_(()=>[e("div",_e,[ue,(f(!0),x(y,null,q(m.value,c=>(f(),G(W,{key:c.order_id,list:c},null,8,["list"]))),128))])]),_:1}),o(g,{title:"推荐"},{default:_(()=>[e("div",ve,[fe,(f(),x(y,null,q(2,c=>e("div",{key:c},ge)),64))])]),_:1})]),_:1},8,["active"])]),e("div",he,[o(L,null,{default:_(()=>[o(h,{icon:"shop-o",text:"首页",color:"#ee0a24",to:"/"}),o(h,{icon:"cart-o",text:"购物车",to:"/card"}),o(h,{icon:[a.value?z.value.name2:z.value.name1],text:[a.value?"已收藏":"收藏"],color:[a.value?F.value.color2:F.value.color1],onClick:D},null,8,["icon","text","color"]),o(k,{type:"warning",text:"加入购物车",onClick:I}),o(k,{type:"danger",text:"立即购买",to:{path:"/buy",query:{food_id:l.value.food_id,shop_name:C.value}}},null,8,["to"])]),_:1})])],64)}}},we=M(xe,[["__scopeId","data-v-21562e9d"]]);export{we as default};
