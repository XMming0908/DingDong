import{_ as F,n as $,u as j,a as q,r,q as E,o as N,b as _,c as p,d as h,e,f as n,w as f,s as T,F as D,j as R,t as x,x as g,p as U,h as P,y as G,z as J,A as K}from"./index-DxwKcjF_.js";const l=d=>(U("data-v-b82c4cb4"),d=d(),P(),d),O={style:{display:"flex","justify-content":"center","flex-direction":"column",height:"100vw"}},Q={style:{display:"flex","align-items":"center",padding:"10px","background-color":"#6CB6FF",color:"white"}},W=l(()=>e("h3",{style:{margin:"0"}},"购物车",-1)),X=l(()=>e("div",{style:{flex:"1","font-size":"16px","margin-left":"10px",display:"flex","align-items":"center"}},[g(" 大连东软信息学院(软件园校区) "),e("svg",{t:"1720854798894",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6377",width:"15",height:"10",fill:"white"},[e("path",{d:"M573.056 752l308.8-404.608A76.8 76.8 0 0 0 820.736 224H203.232a76.8 76.8 0 0 0-61.056 123.392L450.976 752a76.8 76.8 0 0 0 122.08 0z","p-id":"6378"})])],-1)),Y={style:{"margin-left":"auto"},t:"1720854572824",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4595",width:"23",height:"23",fill:"white"},Z=l(()=>e("path",{d:"M976.217626 189.447677L832.171062 45.301358c-60.451674-60.451674-158.710584-60.351919-219.162259 0l-549.651362 549.651362H63.257685c-0.099755 0 0 0 0 0.099756L11.384961 646.925199c-7.481643 7.481643-11.571608 17.656677-11.372097 28.230733l6.184825 302.757148c0.399021 20.848845 17.257656 37.607725 38.006746 37.90699l302.258372 5.686049h0.698286c10.27479 0 20.150558-4.089965 27.432691-11.372097L976.217626 408.51018c60.451674-60.351919 60.451674-158.710584 0-219.062503zM399.133573 876.062982L145.456002 622.485166l387.34959-387.34959L786.483163 488.713392 399.133573 876.062982z m-316.224106 63.04531l-5.087517-249.08883 12.868426-12.868425 253.677571 253.67757-12.868426 12.868426-248.590054-4.588741z m838.542533-585.363738l-80.203212 80.203212-253.67757-253.677571L667.774429 100.066983c30.126082-30.126082 79.40517-30.225837 109.531252 0l144.146319 144.046564c30.225837 30.325592 30.225837 79.40517 0 109.631007z","p-id":"4596"},null,-1)),e0=l(()=>e("path",{d:"M580.38884 354.143575c-15.162796-15.162796-39.60283-15.162796-54.765625 0L371.700882 508.065908c-15.162796 15.162796-15.162796 39.60283 0 54.765626 7.581398 7.581398 17.457167 11.372097 27.432691 11.372097 9.875769 0 19.851292-3.790699 27.43269-11.372097l153.922333-153.922333c15.063041-15.063041 15.063041-39.60283-0.099756-54.765626z","p-id":"4597"},null,-1)),t0=[Z,e0],s0={style:{width:"100%"}},o0={class:"checkBox"},i0={style:{"font-weight":"bold","font-size":"15px","margin-left":"10px"}},n0=["onClick"],l0=l(()=>e("svg",{t:"1720406461697",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4432",width:"20",height:"20"},[e("path",{d:"M721.92 333.418l0.91 440.65c0 23.104-9.546 35.475-32.746 35.475l-336.554-0.908c-23.181 0-33.383-10.552-33.383-33.655V333.418H268v441.731c0 46.334 37.705 84.012 84.047 84.012h336.044c46.344 0 84.068-37.678 84.068-84.012V333.418H721.92z","p-id":"4433"}),e("path",{d:"M390.46 427.958v312.805c0 2.036 0.291 4.003 0.815 5.88 15.392-0.012 30.785-0.047 46.174-0.102 0.509-1.847 0.789-3.78 0.789-5.781V428.094c-15.925-0.064-31.851-0.109-47.778-0.136zM601.398 429.091v311.672c0 1.627 0.187 3.212 0.529 4.743 15.564-0.068 31.133-0.118 46.7-0.147 0.32-1.486 0.496-3.023 0.496-4.601V429.22c-15.908-0.023-31.816-0.066-47.725-0.129zM859.49 248.742H672.856v-52.638c0.854-42.386-34.059-52.608-68.913-52.608H436.238c-43.288 0-67.972 16.28-67.972 51.153l-0.182 54.092H178.493v51.423h680.996l0.001-51.422z m-234.377 0H415.046v-36.809c0-11.664 8.225-21.831 19.917-21.831l168.054 0.909c11.671 0 21.945 8.383 21.945 20.047l0.151 37.684zM497.612 429.124v311.671c0 1.627 0.186 3.215 0.524 4.744 15.426-0.068 30.854-0.116 46.282-0.146 0.318-1.485 0.492-3.022 0.492-4.603V429.253c-15.765-0.024-31.533-0.065-47.298-0.129z","p-id":"4434"})],-1)),c0=[l0],a0={style:{display:"flex"}},d0=["src"],u0={style:{flex:"1",display:"flex","flex-direction":"column"}},r0={style:{"margin-top":"auto",display:"flex"}},_0={style:{"font-size":"15px","font-weight":"bold",display:"flex","align-items":"flex-end"}},p0={style:{"font-size":"20px"}},h0={style:{"margin-left":"auto",display:"flex","align-items":"center"}},m0={style:{margin:"0 5px"}},v0={class:"footer1"},f0=l(()=>e("div",{style:{height:"100px"}},null,-1)),x0={__name:"CardView",setup(d){$();const b=j(),k=q(),C=t=>`http://172.17.18.240:8080/nfood${t}`,o=r([]),c=r([]),m=r(null),y=r(!1),z=t=>{o.value[o.value.findIndex(s=>s.item_id===t)].num++},V=t=>{o.value[o.value.findIndex(s=>s.item_id===t)].num>1&&o.value[o.value.findIndex(s=>s.item_id===t)].num--},I=t=>{M(t),o.value.splice(o.value.findIndex(s=>s.item_id===t),1)},B=async t=>{const s=await T(t);o.value.push(...s)},M=async t=>{const s=await G(t);s.success==="0"&&J("删除失败"),s.success==="1"&&K("删除成功")},L=t=>{t===!0&&m.value.toggleAll(!0),t===!1&&m.value.toggleAll(!1)},v=E(()=>{let t=0;return c.value.length>=1?(o.value.forEach((s,a)=>{c.value.forEach(u=>{s.item_id===u&&(t+=o.value[a].price*o.value[a].num*100)})}),t):t=0}),H=()=>{b.push({path:"/buy2",query:{sum:v.value/100,itemId:c.value.join(",")}})};return N(()=>{B(k.userId)}),(t,s)=>{const a=_("van-checkbox"),u=_("van-button"),S=_("van-checkbox-group"),A=_("van-submit-bar");return p(),h("div",O,[e("div",Q,[W,X,(p(),h("svg",Y,t0))]),e("div",s0,[n(S,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=i=>c.value=i),ref_key:"checkBox",ref:m,shape:"square"},{default:f(()=>[e("ul",null,[(p(!0),h(D,null,R(o.value,i=>(p(),h("li",{key:i.item_id},[e("div",o0,[n(a,{style:{"border-radius":"50%",border:"1px solid black",width:"20px",height:"20px"},name:i.item_id},null,8,["name"]),e("text",i0,"商品名："+x(i.foodname),1),e("div",{style:{"margin-left":"auto"},onClick:w=>I(i.item_id)},c0,8,n0)]),e("div",a0,[e("img",{src:C(i.pic),class:"item_img"},null,8,d0),e("div",u0,[e("div",r0,[e("div",_0,[g(" ￥ "),e("div",p0,x(i.price),1)]),e("div",h0,[n(u,{class:"vb",icon:"plus",type:"primary",onClick:w=>z(i.item_id)},null,8,["onClick"]),e("span",m0,x(i.num),1),n(u,{class:"vb",icon:"minus",type:"primary",onClick:w=>V(i.item_id)},null,8,["onClick"])])])])])]))),128))])]),_:1},8,["modelValue"])]),e("div",v0,[n(A,{price:v.value,"button-text":"结算",onSubmit:H,disabled:v.value==0},{default:f(()=>[n(a,{modelValue:y.value,"onUpdate:modelValue":s[1]||(s[1]=i=>y.value=i),onChange:L},{default:f(()=>[g("全选")]),_:1},8,["modelValue"])]),_:1},8,["price","disabled"]),f0])])}}},y0=F(x0,[["__scopeId","data-v-b82c4cb4"]]);export{y0 as default};
